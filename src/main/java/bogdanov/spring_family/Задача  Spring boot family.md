Задача: Создание Spring Boot REST API для управления семьей, домом и животными
Описание
Вам необходимо разработать RESTful веб-приложение на основе Spring Boot, которое позволит создавать и управлять данными о своей семье, доме и домашних животных. Приложение должно быть интерактивным и мотивировать вас вводить свои собственные данные, такие как имена, возраст и роли членов семьи (например, дочь, сын, отец, мать, муж, жена). Сущности связаны отношениями "многие к одному", что делает задачу интересной и практичной для изучения работы с реляционными базами данных и REST API.
Требования
1. Сущности
Создайте следующие сущности с указанными полями:

FamilyMember (Член семьи):

id (уникальный идентификатор, автоинкремент)
name (имя члена семьи, строка, обязательно, длина 2–50 символов)
age (возраст, целое число, должно быть от 0 до 120)
role (роль в семье, перечисление enum, обязательно, возможные значения: DAUGHTER, SON, FATHER, MOTHER, HUSBAND, WIFE, GRANDMOTHER, GRANDFATHER, OTHER)
house (дом, в котором живет член семьи, связь с сущностью House)


Pet (Домашнее животное):

id (уникальный идентификатор, автоинкремент)
name (имя животного, строка, обязательно, длина 2–50 символов)
species (вид животного, строка, обязательно, длина 2–50 символов, например, "Dog", "Cat", "Parrot")
age (возраст животного, целое число, должно быть от 0 до 30)
house (дом, в котором живет животное, связь с сущностью House)


House (Дом):

id (уникальный идентификатор, автоинкремент)
address (адрес дома, строка, обязательно, длина 5–100 символов)
description (описание дома, строка, необязательно, длина до 200 символов)
familyMembers (список членов семьи, живущих в доме, связь с сущностью FamilyMember)
pets (список животных, живущих в доме, связь с сущностью Pet)



2. Связи

Реализуйте связь один ко многим между House и FamilyMember (один дом может содержать много членов семьи, каждый член семьи живет в одном доме).
Реализуйте связь один ко многим между House и Pet (один дом может содержать много животных, каждое животное живет в одном доме).
Используйте аннотации JPA (@Entity, @ManyToOne, @OneToMany, @JoinColumn) для настройки связей.

3. Перечисление (Enum)
Создайте перечисление FamilyRole для сущности FamilyMember с указанными значениями:
public enum FamilyRole {
    DAUGHTER, SON, FATHER, MOTHER, HUSBAND, WIFE, GRANDMOTHER, GRANDFATHER, OTHER
}

4. Функционал REST API
Реализуйте REST API с CRUD-операциями для каждой сущности. Эндпоинты должны быть организованы следующим образом:

House API:

GET /api/houses — получить список всех домов
GET /api/houses/{id} — получить дом по ID
POST /api/houses — создать новый дом
PUT /api/houses/{id} — обновить существующий дом
DELETE /api/houses/{id} — удалить дом (удаление дома должно каскадно удалять связанных членов семьи и животных)


FamilyMember API:

GET /api/family-members — получить список всех членов семьи
GET /api/family-members/{id} — получить члена семьи по ID
POST /api/family-members?houseId={houseId} — создать нового члена семьи и привязать его к дому по houseId
PUT /api/family-members/{id}?houseId={houseId} — обновить существующего члена семьи (с возможностью сменить дом)
DELETE /api/family-members/{id} — удалить члена семьи


Pet API:

GET /api/pets — получить список всех животных
GET /api/pets/{id} — получить животное по ID
POST /api/pets?houseId={houseId} — создать новое животное и привязать его к дому по houseId
PUT /api/pets/{id}?houseId={houseId} — обновить существующее животное (с возможностью сменить дом)
DELETE /api/pets/{id} — удалить животное



5. Технические требования

Используйте Spring Boot (последняя стабильная версия) и Spring Data JPA для работы с базой данных.
Для базы данных используйте встроенную базу H2 (для упрощения) или другую базу данных на ваш выбор (PostgreSQL, MySQL и т.д.).
Реализуйте валидацию входных данных с помощью аннотаций (@NotBlank, @Size, @Min, @Max) из spring-boot-starter-validation.
Настройте обработку ошибок (например, возврат 400 Bad Request при невалидных данных, 404 Not Found при отсутствии записи).
Используйте ResponseEntity для гибкого управления HTTP-ответами.
Настройте Springdoc OpenAPI для автоматической генерации документации API. Swagger UI должен быть доступен по адресу /swagger-ui.html.

6. Дополнительные требования

Реализуйте глобальную обработку исключений с помощью @ControllerAdvice для обработки ошибок валидации и других исключений.
Добавьте аннотации OpenAPI (@Operation, @ApiResponses, @Tag) для документирования всех эндпоинтов.
Напишите хотя бы один интеграционный тест для проверки работы API с использованием spring-boot-starter-test.
Сделайте приложение интерактивным: студенты должны иметь возможность вводить свои реальные данные (например, имена членов своей семьи, их возраст, роль в семье, данные о своих домашних животных).

7. Ожидаемый результат

Полностью рабочее Spring Boot приложение с REST API.
Документация API, доступная через Swagger UI, где студенты могут протестировать эндпоинты.
Возможность вводить персонализированные данные (например, имена членов семьи, животных, адрес дома) через Postman или Swagger UI.
Корректная работа всех CRUD-операций и связей между сущностями.

8. Рекомендации

Используйте слоистую архитектуру: сущности, репозитории, сервисы, контроллеры.
Настройте каскадное удаление для связи House с FamilyMember и Pet.
Убедитесь, что валидация корректно отображается в документации Swagger.
Для тестирования используйте H2 с предзаполненными данными (можно настроить через data.sql), чтобы студенты могли сразу начать вводить свои данные.


Подсказка. 
// Поле enum
    @Enumerated(EnumType.STRING)  // Ключевой шаг!
    private FamilyRole role;
 //
@Enumerated(EnumType.STRING): Это аннотация JPA, которая указывает, как хранить enum в БД.

EnumType.STRING: Хранит как строку (рекомендуется! Например, "DAUGHTER" в БД). Это безопасно — если вы измените порядок enum, данные не сломаются.
EnumType.ORDINAL (по умолчанию): Хранит как число (0 для первого значения, 1 для второго и т.д.). Не используйте, если enum может измениться — это приведет к ошибкам в данных.


Без @Enumerated JPA использует ORDINAL по умолчанию, что может вызвать проблемы.

Пример JSON для создания FamilyMember в Postman:
json{
    "name": "Анна",
    "age": 25,
    "role": "DAUGHTER",  // Точное значение из enum (верхний регистр!)
    "houseId": 1  // В запросе через @RequestParam
}
